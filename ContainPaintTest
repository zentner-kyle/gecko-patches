# HG changeset patch
# User Kyle Zentner <kzentner@mozilla.com>
# Parent  8b9d691b8274c75a9a20d28d356b95c8c4f052b4
Bug 1170781 - Patch 2: Test CSS 'contain: paint'.

diff --git a/layout/reftests/css-contain/paint-clip-ref.html b/layout/reftests/css-contain/paint-clip-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-contain/paint-clip-ref.html
@@ -0,0 +1,24 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+  <meta charset="utf-8">
+  <style>
+  body {
+    margin: 0;
+  }
+  #a {
+      width: 150px;
+      height: 150px;
+      background: green;
+      padding-width: 0;
+      position: absolute;
+      top: 25px;
+      left: 25px;
+  }
+  </style>
+</head>
+<body>
+  <div id="a">
+  </div>
+</body>
+</html>
diff --git a/layout/reftests/css-contain/paint-clip.html b/layout/reftests/css-contain/paint-clip.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-contain/paint-clip.html
@@ -0,0 +1,53 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+  <meta charset="utf-8">
+  <style>
+  body {
+    margin: 0;
+  }
+  .root {
+    contain: paint;
+    width: 100px;
+    height: 100px;
+    background: green;
+    margin: 25px;
+    padding: 25px;
+    padding-width: 0;
+  }
+  .a {
+    width: 100px;
+    height: 100px;
+    background: red;
+  }
+  .b {
+    width: 100px;
+    height: 200px;
+    background: red;
+  }
+  .c {
+    width: 100px;
+    height: 100px;
+    background: green;
+  }
+  .background {
+    position: absolute;
+    top: -50px;
+    left: -50px;
+    width: 225px;
+    height: 300px;
+    background: red;
+    z-index: -1;
+  }
+  </style>
+</head>
+<body>
+  <div class="root">
+    <div class="b">
+      <div class="c"> </div>
+      <div class="a"> </div>
+      <div class="background"> </div>
+    </div>
+  </div>
+</body>
+</html>
diff --git a/layout/reftests/css-contain/paint-containing-block-absolute-ref.html b/layout/reftests/css-contain/paint-containing-block-absolute-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-contain/paint-containing-block-absolute-ref.html
@@ -0,0 +1,23 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+  <meta charset="utf-8">
+  <style>
+  body {
+    margin: 0;
+  }
+  #a {
+      width: 100px;
+      height: 100px;
+      background: green;
+      position: absolute;
+      top: 50px;
+      left: 50px;
+  }
+  </style>
+</head>
+<body>
+  <div id="a">
+  </div>
+</body>
+</html>
diff --git a/layout/reftests/css-contain/paint-containing-block-absolute.html b/layout/reftests/css-contain/paint-containing-block-absolute.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-contain/paint-containing-block-absolute.html
@@ -0,0 +1,34 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+  <meta charset="utf-8">
+  <style>
+  body {
+    margin: 0;
+  }
+  #a {
+      contain: paint;
+      width: 100px;
+      height: 100px;
+      background: red;
+      margin: 50px;
+  }
+  #b {
+      position: absolute;
+      width: 100px;
+      height: 100px;
+      background: green;
+      top: 0;
+      left: 0;
+  }
+  </style>
+</head>
+<body>
+  <div id="a">
+    <div>
+      <div id="b">
+      </div>
+    </div>
+  </div>
+</body>
+</html>
diff --git a/layout/reftests/css-contain/paint-containing-block-fixed-ref.html b/layout/reftests/css-contain/paint-containing-block-fixed-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-contain/paint-containing-block-fixed-ref.html
@@ -0,0 +1,20 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+  <meta charset="utf-8">
+  <style>
+  #a {
+      width: 100px;
+      height: 100px;
+      background: green;
+      position: absolute;
+      top: 50px;
+      left: 50px;
+  }
+  </style>
+</head>
+<body>
+  <div id="a">
+  </div>
+</body>
+</html>
diff --git a/layout/reftests/css-contain/paint-containing-block-fixed.html b/layout/reftests/css-contain/paint-containing-block-fixed.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-contain/paint-containing-block-fixed.html
@@ -0,0 +1,34 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+  <meta charset="utf-8">
+  <style>
+  body {
+    margin: 0;
+  }
+  #a {
+      contain: paint;
+      width: 100px;
+      height: 100px;
+      background: red;
+      margin: 50px;
+  }
+  #b {
+      position: fixed;
+      width: 100px;
+      height: 100px;
+      background: green;
+      top: 0;
+      left: 0;
+  }
+  </style>
+</head>
+<body>
+  <div id="a">
+    <div>
+      <div id="b">
+      </div>
+    </div>
+  </div>
+</body>
+</html>
diff --git a/layout/reftests/css-contain/paint-formatting-context-float-ref.html b/layout/reftests/css-contain/paint-formatting-context-float-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-contain/paint-formatting-context-float-ref.html
@@ -0,0 +1,28 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+  <meta charset="utf-8">
+  <style>
+  body {
+    margin: 0;
+  }
+  #left {
+    float: left;
+    height: 50px;
+    width: 10px;
+    background: blue;
+  }
+  #a {
+      background: green;
+      margin: 10px;
+      width: 50px;
+      height: 50px;
+  }
+  </style>
+</head>
+<body>
+  <div id="left"> </div>
+  <div id="a">
+  </div>
+</body>
+</html>
diff --git a/layout/reftests/css-contain/paint-formatting-context-float.html b/layout/reftests/css-contain/paint-formatting-context-float.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-contain/paint-formatting-context-float.html
@@ -0,0 +1,37 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+  <meta charset="utf-8">
+  <style>
+  body {
+    margin: 0;
+  }
+  #left {
+    float: left;
+    height: 50px;
+    width: 10px;
+    background: blue;
+  }
+  #a {
+      contain: paint;
+      background: red;
+      margin: 10px;
+      width: 50px;
+      height: 50px;
+  }
+  #b {
+      clear: left;
+      width: 50px;
+      height: 50px;
+      background: green;
+  }
+  </style>
+</head>
+<body>
+  <div id="left"> </div>
+  <div id="a">
+    <div id="b">
+    </div>
+  </div>
+</body>
+</html>
diff --git a/layout/reftests/css-contain/paint-formatting-context-margin-ref.html b/layout/reftests/css-contain/paint-formatting-context-margin-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-contain/paint-formatting-context-margin-ref.html
@@ -0,0 +1,29 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+  <meta charset="utf-8">
+  <style>
+  body {
+    margin: 0;
+  }
+  #a {
+      background: blue;
+      margin: 10px;
+      width: 50px;
+      height: 50px;
+  }
+  #b {
+      position: relative;
+      width: 50px;
+      height: 40px;
+      background: green;
+      top: 10px;
+  }
+  </style>
+</head>
+<body>
+  <div id="a">
+    <div id="b"> </div>
+  </div>
+</body>
+</html>
diff --git a/layout/reftests/css-contain/paint-formatting-context-margin.html b/layout/reftests/css-contain/paint-formatting-context-margin.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-contain/paint-formatting-context-margin.html
@@ -0,0 +1,35 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+  <meta charset="utf-8">
+  <style>
+  body {
+    margin: 0;
+  }
+  #a {
+      contain: paint;
+      background: blue;
+      margin: 10px;
+      width: 50px;
+      height: 50px;
+  }
+  #b {
+      width: 50px;
+      height: 40px;
+      background: green;
+      margin-top: 10px;
+  }
+  #c {
+      background: red;
+      width: 50px;
+      height: 10px;
+  }
+  </style>
+</head>
+<body>
+  <div id="a">
+    <div id="b"> </div>
+    <div id="c"> </div>
+  </div>
+</body>
+</html>
diff --git a/layout/reftests/css-contain/reftest.list b/layout/reftests/css-contain/reftest.list
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-contain/reftest.list
@@ -0,0 +1,7 @@
+default-preferences pref(layout.css.contain.enabled,true)
+
+== paint-clip.html paint-clip-ref.html
+== paint-containing-block-absolute.html paint-containing-block-absolute-ref.html
+== paint-containing-block-fixed.html paint-containing-block-fixed-ref.html
+== paint-formatting-context-float.html paint-formatting-context-float-ref.html
+== paint-formatting-context-margin.html paint-formatting-context-margin-ref.html
diff --git a/layout/reftests/reftest.list b/layout/reftests/reftest.list
--- a/layout/reftests/reftest.list
+++ b/layout/reftests/reftest.list
@@ -137,16 +137,19 @@ include css-variables/reftest.list
 # layout/style/test/test_visited_reftests instead of using the reftest
 # harness.
 
 include cssom/reftest.list
 
 # columns/
 include columns/reftest.list
 
+# contain/
+include css-contain/reftest.list
+
 # content/
 include ../../dom/tests/reftest/reftest.list
 
 # counters/
 include counters/reftest.list
 
 # counter-style/
 include counter-style/reftest.list
