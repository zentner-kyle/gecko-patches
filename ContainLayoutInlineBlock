# HG changeset patch
# User Kyle Zentner <kzentner@mozilla.com>
# Parent  5ca9cc79ba1d4aa1f96801a602182bde3a7ab04c

diff --git a/layout/generic/nsBlockFrame.cpp b/layout/generic/nsBlockFrame.cpp
--- a/layout/generic/nsBlockFrame.cpp
+++ b/layout/generic/nsBlockFrame.cpp
@@ -671,16 +671,24 @@ nsBlockFrame::GetMinISize(nsRenderingCon
   nsIFrame* firstInFlow = FirstContinuation();
   if (firstInFlow != this)
     return firstInFlow->GetMinISize(aRenderingContext);
 
   DISPLAY_MIN_WIDTH(this, mMinWidth);
 
   CheckIntrinsicCacheAgainstShrinkWrapState();
 
+  if (StyleDisplay()->IsContainLayout()) {
+    if (mMinWidth != NS_INTRINSIC_WIDTH_UNKNOWN) {
+      return mMinWidth;
+    } else {
+      return 0;
+    }
+  }
+
   if (mMinWidth != NS_INTRINSIC_WIDTH_UNKNOWN)
     return mMinWidth;
 
 #ifdef DEBUG
   if (gNoisyIntrinsic) {
     IndentBy(stdout, gNoiseIndent);
     ListTag(stdout);
     printf(": GetMinISize\n");
@@ -756,16 +764,25 @@ nsBlockFrame::GetPrefISize(nsRenderingCo
   nsIFrame* firstInFlow = FirstContinuation();
   if (firstInFlow != this)
     return firstInFlow->GetPrefISize(aRenderingContext);
 
   DISPLAY_PREF_WIDTH(this, mPrefWidth);
 
   CheckIntrinsicCacheAgainstShrinkWrapState();
 
+  if (StyleDisplay()->IsContainLayout()) {
+    if (mPrefWidth != NS_INTRINSIC_WIDTH_UNKNOWN) {
+      return mPrefWidth;
+    } else {
+      return 0;
+    }
+  }
+
+
   if (mPrefWidth != NS_INTRINSIC_WIDTH_UNKNOWN)
     return mPrefWidth;
 
 #ifdef DEBUG
   if (gNoisyIntrinsic) {
     IndentBy(stdout, gNoiseIndent);
     ListTag(stdout);
     printf(": GetPrefISize\n");
