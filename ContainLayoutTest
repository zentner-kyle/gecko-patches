# HG changeset patch
# User Kyle Zentner <kzentner@mozilla.com>
# Parent  83047d7782f69bebe41aa5c5a667de3225b54f42
Bug 1178895 - Patch 2: Test CSS 'contain: layout'.

diff --git a/layout/reftests/w3c-css/submitted/contain/layout-inline-zero-001-ref.html b/layout/reftests/w3c-css/submitted/contain/layout-inline-zero-001-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/w3c-css/submitted/contain/layout-inline-zero-001-ref.html
@@ -0,0 +1,28 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+  <meta charset="utf-8">
+  <title>CSS Reftest Reference</title>
+  <link rel="author" title="Kyle Zentner" href="mailto:kzentner@mozilla.com">
+  <style>
+  body {
+    margin: 0;
+  }
+  .container-ref {
+    display: block;
+    background: red;
+    border: 1em solid green;
+    width: auto;
+    height: 0;
+  }
+  .inner-ref {
+    position: absolute;
+    left: 1em;
+  }
+  </style>
+</head>
+<body class="reftest-paint">
+  <span class="container-ref"><span class="inner-ref">Test span.</span></span>
+  <!--<div class="container-ref"><span class="inner-ref">Test span.</span></div>-->
+</body>
+</html>
diff --git a/layout/reftests/w3c-css/submitted/contain/layout-inline-zero-001.html b/layout/reftests/w3c-css/submitted/contain/layout-inline-zero-001.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/w3c-css/submitted/contain/layout-inline-zero-001.html
@@ -0,0 +1,24 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+  <meta charset="utf-8">
+  <title>CSS Test: 'contain: layout' on inline element should cause the element
+    to become a block with zero height.</title>
+  <link rel="author" title="Kyle Zentner" href="mailto:kzentner@mozilla.com">
+  <link rel="help" href="http://www.w3.org/TR/css-containment-1/#containment-layout">
+  <link rel="match" href="layout-inline-zero-001-ref.html">
+  <style>
+  body {
+    margin: 0;
+  }
+  .container {
+    contain: layout;
+    background: red;
+    border: 1em solid green;
+  }
+  </style>
+</head>
+<body class="reftest-paint">
+  <span class="container">Test span.</span>
+</body>
+</html>
diff --git a/layout/reftests/w3c-css/submitted/contain/layout-zero-001-ref.html b/layout/reftests/w3c-css/submitted/contain/layout-zero-001-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/w3c-css/submitted/contain/layout-zero-001-ref.html
@@ -0,0 +1,38 @@
+
+<!DOCTYPE HTML>
+<html>
+<head>
+  <meta charset="utf-8">
+  <title>CSS Reftest Reference</title>
+  <link rel="author" title="Kyle Zentner" href="mailto:kzentner@mozilla.com">
+  <style>
+  body {
+    margin: 0;
+  }
+  .container {
+    background: red;
+    border: 1em solid green;
+    width: 100px;
+    height: 0;
+  }
+  </style>
+</head>
+<body class="reftest-paint">
+  <div class="fun">
+    <div>
+      This is some content before the contained element.
+    </div>
+    <div>
+      This is a parent of the contained element.
+      <div class="container">
+        <div>
+          Lorem ipsum dolor sit amet
+        </div>
+      </div>
+    </div>
+    <div>
+      This is some content after the contained element.
+    </div>
+  </div>
+</body>
+</html>
diff --git a/layout/reftests/w3c-css/submitted/contain/layout-zero-001.html b/layout/reftests/w3c-css/submitted/contain/layout-zero-001.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/w3c-css/submitted/contain/layout-zero-001.html
@@ -0,0 +1,40 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+  <meta charset="utf-8">
+  <title>CSS Test: 'contain: layout' on auto sized block should cause the block
+    to be zero sized.</title>
+  <link rel="author" title="Kyle Zentner" href="mailto:kzentner@mozilla.com">
+  <link rel="help" href="http://www.w3.org/TR/css-containment-1/#containment-layout">
+  <link rel="match" href="layout-zero-001-ref.html">
+  <style>
+  body {
+    margin: 0;
+  }
+  .container {
+    contain: layout;
+    background: red;
+    border: 1em solid green;
+    width: 100px;
+  }
+  </style>
+</head>
+<body class="reftest-paint">
+  <div class="fun">
+    <div>
+      This is some content before the contained element.
+    </div>
+    <div>
+      This is a parent of the contained element.
+      <div class="container">
+        <div>
+          Lorem ipsum dolor sit amet
+        </div>
+      </div>
+    </div>
+    <div>
+      This is some content after the contained element.
+    </div>
+  </div>
+</body>
+</html>
diff --git a/layout/reftests/w3c-css/submitted/contain/reftest.list b/layout/reftests/w3c-css/submitted/contain/reftest.list
--- a/layout/reftests/w3c-css/submitted/contain/reftest.list
+++ b/layout/reftests/w3c-css/submitted/contain/reftest.list
@@ -5,8 +5,10 @@ default-preferences pref(layout.css.cont
 == paint-containing-block-absolute-001.html paint-containing-block-absolute-001-ref.html
 == paint-containing-block-fixed-001.html paint-containing-block-fixed-001-ref.html
 == paint-formatting-context-float-001.html paint-formatting-context-float-001-ref.html
 == paint-formatting-context-margin-001.html paint-formatting-context-margin-001-ref.html
 == style-counter-increment-001.html style-counter-increment-001-ref.html
 == style-counter-insert-001.html style-counter-insert-001-ref.html
 == style-quote-001.html style-quote-001-ref.html
 == style-break-001.html style-break-001-ref.html
+== layout-zero-001.html layout-zero-001-ref.html
+== layout-inline-zero-001.html layout-inline-zero-001-ref.html
